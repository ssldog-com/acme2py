# acme2py
æœ¬é¡¹ç›®å®ç°äº† [acme.sh](https://github.com/acmesh-official/acme.sh) çš„**dns**ç”³è¯·è¯ä¹¦æµç¨‹ï¼Œé‡‡ç”¨acme.shçš„é»˜è®¤é…ç½®ï¼Œ
CAä¸º [zerossl](https://zerossl.com) å’Œ [letâ€˜sencrypt](https://letsencrypt.org/) ï¼Œè´¦æˆ·ç§é’¥ä½¿ç”¨ **ecc-prime256v1** ç”Ÿæˆï¼ŒåŸŸåç§é’¥å¯é€‰ **rsa-2048** æˆ– **ecc-prime256v1**  ç”Ÿæˆã€‚


This program implements the default certificate application process of [acme.sh](https://github.com/acmesh-official/acme.sh), using dns-txt,
The CA are [zerossl](https://zerossl.com) and  [letâ€˜sencrypt](https://letsencrypt.org/), and the account private key is generated by **ecc-prime256v1** and domain private key can generated by **rsa-prime256v1** or **ecc-prime256v1**. 

## åŠŸèƒ½ / Function
* _**CA / è¯ä¹¦æœºæ„**_
* âœ… zerossl
* âœ… letâ€˜s encrypt
* _**ALG / åŠ å¯†æ–¹å¼**_
* âœ… ECC P-256
* âœ… RSA 2048
* _**OPTION / æ“ä½œ**_
* âœ… issue
* âœ… renew
* âŒ revoke
* _**OTHER / å…¶ä»–**_
* âœ… idn / å›½é™…åŒ–åŸŸå
* âœ… wildcard / æ³›åŸŸå
* âŒ ip / ipè¯ä¹¦
* âœ… multi domain / å¤šåŸŸå
* âŒ cron / å®šæ—¶ä»»åŠ¡




## è¿è¡Œè¦æ±‚ / Requirements
* python 3.8+
* releaseç‰ˆå¢åŠ äº†æ— éœ€pythonçš„å¯æ‰§è¡Œæ–‡ä»¶ / The pre release version has added executable files that do not require Python

## ä½¿ç”¨ / Usage

### ğŸ‘ å®‰è£…åº“ / libs needed
````bash
pip install --upgrade cryptography==42.0.0 # !!! cryptography>=42.0.0
pip install requests
````
### â–¶ï¸ è¿è¡Œ / run
````bash
python [ca] [options] --email=youdemail --domain=domain1.com --domian=*.domain1.com --domain=domain2 ... [--rsa=2048]
# ca: acme-zerossl.py acme-letsenc.py
# æ“ä½œ/options: issue continue renew
# --rsa=2048  ç”ŸæˆrsaåŸŸåç§é’¥ï¼Œä¸å†™åˆ™ç”Ÿæˆecc / Generate RSA domain private key, if not written, generate ECC
````

### ğŸ“¤ ç”³è¯·è¯ä¹¦ / issue
````bash
python acme-zerossl.py issue --email=example@email.com --domain=example.com --domian=*.example.com 
````

### ğŸ“ æ·»åŠ dnsè®°å½•å / after you add the DNS records
````bash
python acme-zerossl.py continue --email=example@email.com --domain=example.com --domian=*.example.com 
````

### ğŸ†• æ›´æ–°è¯ä¹¦ / renew
````bash
python acme-zerossl.py renew --email=example@email.com --domain=example.com --domian=*.example.com 
# å®é™…ä¸Šé‡æ–°ç”³è¯·è¯ä¹¦ Actually this will issue a new cert
````
### âŒ åŠé”€è¯ä¹¦ æœªå®ç° / revoke certs NOT implemented



## æ–‡ä»¶è¯´æ˜ / File description

```
â”œâ”€â”€ .gitignore                              
â”œâ”€â”€ ca                                   // caé…ç½®æ–‡ä»¶ï¼ŒåŒ…å« account.json account.key ca.conf
â”‚   â”œâ”€â”€ acme-v02.api.letsencrypt.org                 
â”‚   â””â”€â”€ acme.zerossl.com                           
â”œâ”€â”€ domain              // -> /root/.acme.sh/domain/ or /root/.acme.sh/domain_ecc/     
â”‚   â”œâ”€â”€ domain.key      // -> /root/.acme.sh/domain_ecc/domain.key      = ssl.key
â”‚   â”œâ”€â”€ domain.cer      // -> /root/.acme.sh/domain_ecc/fullchain.cer   = ssl.pem           
â”‚   â”œâ”€â”€ domian.conf     // -> /root/.acme.sh/domain_ecc/domain.conf              
â”‚   â””â”€â”€ domain.csr.conf // -> /root/.acme.sh/domain_ecc/domain.csr.conf
â”œâ”€â”€ README.md                   
â””â”€â”€ acme-zerossl.py
```
æ‰€æœ‰æ–‡ä»¶æ ¹è·¯å¾„é»˜è®¤åœ¨é¡¹ç›®ç›®å½•ä¸‹ã€‚
ä¸ acme.sh çš„é…ç½®æ–‡ä»¶åŸºæœ¬ç›¸åŒã€‚<br>
æ³¨æ„ï¼š**åŸŸåç›®å½•ä¸åŒ** _./domain/_ å¯¹åº” **acme.sh** çš„ _./domain_ecc/_ ç›®å½• ; _./domain_rsa/_ ç›®å½•å¯¹åº” **acme.sh** çš„ _./domain/_ ç›®å½•

The root path of all files is in the project directory.
Using the same configuration file with acme.sh.<br>
Attention: **Different domain directories** _./domain/_ directory corresponds to **acme.sh**  _/domain_ecc/_ directory; _./domain_rsa/_ directory corresponds to **acme.sh**  _./domain/_ directory



## âš  æ³¨æ„ / Notice
*     æœ¬ç¨‹åºä¸æ”¯æŒipè¯ä¹¦ / This program does not support IP cert
*     æœ¬ç¨‹åºæœªéµå¾ªacme.shçš„è®¾è®¡ / This program does not follow the design of acme.sh
*     æœ¬ç¨‹åºæœªç»è¿‡ä¸¥æ ¼æµ‹è¯•ä¸ä¼˜åŒ– / This program has not been strictly tested and optimized
*     ç¦æ­¢æ»¥ç”¨ / Abuse is prohibited
*     ç¦æ­¢ç”¨äºä¸€åˆ‡æŸå®³å…¬å…±åˆ©ç›Šçš„è¡Œä¸º / Any other acts that harm the public interest are prohibited
*     éƒ¨åˆ†ä»£ç ç”±AIç”Ÿæˆ / Part of the code is generated by AI


## In the end
* å‚è€ƒæˆ‘çš„å¦ä¸€ä¸ªåŸºäº acme.sh çš„å®ç° [Acme2J](https://github.com/ssldog-com/Acme2J)
